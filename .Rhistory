ggplot(aes(term, document, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
dbtopterms <- dbtopics %>%
group_by(document) %>%
top_n(10, document) %>%
ungroup() %>%
arrange(term, -count)
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, document, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
dbtopterms <- dbtopics %>%
group_by(document) %>%
top_n(5, count) %>%
ungroup() %>%
arrange(term, -count)
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, document, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_tdm(Term, Database, n)
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(document) %>%
top_n(5, count) %>%
ungroup() %>%
arrange(term, -count)
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, document, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
View(dbtopterms)
table(dbterms$Database)
source("data-prep.R")
library(plyr) # for count function
library(dplyr)
library(tidyr)
library(tidytext)
library(ggplot2)
#setwd('/home/sean/Dropbox/workspace/database-compare/') # when I'm using NVim-R
dbterms <- read.csv(file = "data/data.csv", header = TRUE, sep = "\t")
# convert terms to characters
dbterms$Term <- as.character(dbterms$Term)
# Merge 1911 with 1910 and 1982 with 1980 start years
dbterms$StartYear[dbterms$StartYear == 1911 ] <- 1910
dbterms$StartYear[dbterms$StartYear == 1982 ] <- 1980
# Merge odd year out with 1999 end year
dbterms$EndYear[dbterms$EndYear == 1991] <- 1999
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_tdm(Term, Database, n)
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(document) %>%
top_n(5, count) %>%
ungroup() %>%
arrange(term, -count)
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, document, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, count, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
table(dbterms$TermType, dbterms$Database)
?tidy
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_tdm(Term, Database, n)
dbtopics <- tidy(termstfidf, matrix = "gamma")
dbtopterms <- dbtopics %>%
group_by(document) %>%
top_n(5, count) %>%
ungroup() %>%
arrange(term, -count)
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, count, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
View(dbtopics)
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1930)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_tdm(Term, Database, n)
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(document) %>%
top_n(5, count) %>%
ungroup() %>%
arrange(term, -count)
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, count, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1940)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_tdm(Term, Database, n)
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(document) %>%
top_n(5, count) %>%
ungroup() %>%
arrange(term, -count)
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, count, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1950)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_tdm(Term, Database, n)
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(document) %>%
top_n(5, count) %>%
ungroup() %>%
arrange(term, -count)
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, count, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
table(dbterms$StartYear, dbterms$Database)
dbtopics
termstfidf
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1950)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
dbtopics <- tidy(termstfidf, matrix = "beta")
dbterms
dbtopics
termstfidf
termstfidf <- LDA(termstfidf, k = 2, control = list(seed = 1000))
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1950)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 2, control = list(seed = 1000))
termstfidf <- LDA(termstfidf, k = 4, control = list(seed = 1000))
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1950)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf
?LDA
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1950)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
View(termstfidf)
termstfidf <- LDA(termstfidf, k = 6, control = list(seed = 1000))
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1950)
termstfidf <- termstfidf %>% count(Database, Term)
#termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- termstfidf %>% cast_sparse(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 6, control = list(seed = 1000))
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1950)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
tterms()
termstfidf
View(termstfidf)
termstfidf[rowTotals > 0]
?tterm
termstfidf["i"]
termstfidf["nrow"
]
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- subset(termstfidf, EndYear < 1950)
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
#termstfidf <- termstfidf %>% cast_sparse(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 6, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopics
dbtopterms <- dbtopics %>%
group_by(document) %>%
top_n(5, count) %>%
ungroup() %>%
arrange(term, -count)
dbtopterms %>%
mutate(term = reorder_within(term, count, document)) %>%
ggplot(aes(term, count, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
dbtopterms <- dbtopics %>%
group_by(document) %>%
#top_n(5, count) %>%
top_n(5, beta) %>%
ungroup() %>%
arrange(term, -beta)
View(dbtopterms)
dbtopics
dbtopterms <- dbtopics %>%
group_by(topic) %>%
#top_n(5, count) %>%
top_n(10, beta) %>%
ungroup() %>%
arrange(topic, -beta)
dbtopterms %>%
mutate(term = reorder_within(term, beta, topic)) %>%
ggplot(aes(term, beta, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf
?cast_sparse
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_sparse(Database, Term, n)
termstfidf
termstfidf <- LDA(termstfidf, k = 6, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(topic) %>%
#top_n(5, count) %>%
top_n(10, beta) %>%
ungroup() %>%
arrange(topic, -beta)
dbtopterms %>%
mutate(term = reorder_within(term, beta, topic)) %>%
ggplot(aes(term, beta, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf
?LDA
termstfidf
termstfidf <- LDA(termstfidf, k = 8, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(topic) %>%
#top_n(5, count) %>%
top_n(10, beta) %>%
ungroup() %>%
arrange(topic, -beta)
dbtopterms %>%
mutate(term = reorder_within(term, beta, topic)) %>%
ggplot(aes(term, beta, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 8, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopics
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf
View(termstfidf)
termstfidf
LDA(termstfidf)
LDA(termstfidf, 30)
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(topic) %>%
top_n(10, beta) %>%
ungroup() %>%
arrange(topic, -beta)
dbtopterms %>%
mutate(term = reorder_within(term, beta, topic)) %>%
ggplot(aes(term, beta, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 30, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(topic) %>%
top_n(10, beta) %>%
ungroup() %>%
arrange(topic, -beta)
View(dbtopterms)
dbtopterms %>%
mutate(term = reorder_within(term, beta, topic)) %>%
ggplot(aes(term, beta, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 8, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(topic) %>%
top_n(10, beta) %>%
ungroup() %>%
arrange(topic, -beta)
dbtopterms %>%
mutate(term = reorder_within(term, beta, topic)) %>%
ggplot(aes(term, beta, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 8, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "gamma")
dbtopterms <- dbtopics %>%
group_by(topic) %>%
top_n(10, gamma) %>%
ungroup() %>%
arrange(topic, -gamma)
dbtopterms %>%
mutate(term = reorder_within(term, gamma, topic)) %>%
ggplot(aes(term, gamma, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
dbtopterms %>%
mutate(term = reorder_within(document, gamma, topic)) %>%
ggplot(aes(document, gamma, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ document, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 8, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "gamma")
dbtopics
dbtopterms <- dbtopics %>%
group_by(topic) %>%
top_n(10, gamma) %>%
ungroup() %>%
arrange(topic, -gamma)
dbtopterms %>%
mutate(term = reorder_within(document, gamma, topic)) %>%
ggplot(aes(topic, gamma, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
View(dbtopics)
dbtopterms %>%
mutate(term = reorder_within(document, gamma, topic)) %>%
ggplot(aes(topic, document, fill = factor(gamma))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
dbtopterms %>%
#  mutate(term = reorder_within(document, gamma, topic)) %>%
ggplot(aes(topic, document, fill = factor(gamma))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
dbtopterms %>%
#  mutate(term = reorder_within(document, gamma, topic)) %>%
ggplot(aes(topic, gamma, fill = factor(document))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
dbtopterms %>%
#  mutate(term = reorder_within(document, gamma, topic)) %>%
ggplot(aes(topic, gamma, fill = factor(document))) +
geom_col(show.legend = FALSE) +
#  facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 8, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(topic) %>%
top_n(10, beta) %>%
ungroup() %>%
arrange(topic, -beta)
dbtopterms %>%
mutate(term = reorder_within(term, beta, topic)) %>%
ggplot(aes(term, beta, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
termstfidf <- tibble(dbterms)
termstfidf <- termstfidf %>% uncount(Freq)
termstfidf <- termstfidf %>% count(Database, Term)
termstfidf <- termstfidf %>% cast_dtm(Database, Term, n)
termstfidf <- LDA(termstfidf, k = 2, control = list(seed = 1000))
dbtopics <- tidy(termstfidf, matrix = "beta")
dbtopterms <- dbtopics %>%
group_by(topic) %>%
top_n(10, beta) %>%
ungroup() %>%
arrange(topic, -beta)
dbtopterms %>%
mutate(term = reorder_within(term, beta, topic)) %>%
ggplot(aes(term, beta, fill = factor(topic))) +
geom_col(show.legend = FALSE) +
facet_wrap(~ topic, scales = "free") +
coord_flip() +
scale_x_reordered()
library(plyr) # for count function
library(dplyr)
library(tidyr)
library(tidytext)
library(ggplot2)
#setwd('/home/sean/Dropbox/workspace/database-compare/') # when I'm using NVim-R
dbterms <- read.csv(file = "data/data.csv", header = TRUE, sep = "\t")
# convert terms to characters
dbterms$Term <- as.character(dbterms$Term)
# Merge 1911 with 1910 and 1982 with 1980 start years
dbterms$StartYear[dbterms$StartYear == 1911 ] <- 1910
dbterms$StartYear[dbterms$StartYear == 1982 ] <- 1980
# Merge odd year out with 1999 end year
dbterms$EndYear[dbterms$EndYear == 1991] <- 1999
table(dbterms$TermType, dbterms$Database)
View(dbterms)
table(dbterms$TermType, dbterms$Database)
table(dbterms$Database, dbterms$TermType)
source('~/Dropbox/workspace/database-compare/topic-modeling.R', echo=TRUE)
styler:::style_active_file()
styler:::style_active_file()
styler:::style_active_file()
styler:::style_active_file()
styler:::style_active_file()
styler:::style_active_file()
styler:::style_active_file()
